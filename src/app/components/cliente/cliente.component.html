<div>
  <div class="col-12">
    <div>
      <div class="toolb">
        <p-toolbar styleClass="mb-1" [style]="{ 'height': '100px'}">
          <ng-template pTemplate="left">
            <div class="my-2">
              <button pButton pRipple label="Nuevo" icon="pi pi-plus" class="p-button-success mr-2 "
                (click)="showDialog()" [disabled]="enaNuevo"></button>
              <p-toast position="top-center"></p-toast>
            </div>
          </ng-template>
        </p-toolbar>
      </div>
      <p-card title="Vertical Grid Form" header="Lista de clientes" [style]="{ width: '600px', height: '400px' }"
        class="car">
        <!-- Campo de búsqueda -->
        <div class="p-inputgroup mb-3">
          <span class="p-inputgroup-addon"><i class="pi pi-search"></i></span>
          <input type="text" pInputText placeholder="Buscar cliente por nombre" (input)="applyFilterGlobal($event)">
        </div>
        <p-table #dt2 dataKey="id" [loading]="loading" [globalFilterFields]="['nombreCliente']" [value]="clientes"
          [scrollable]="true" scrollHeight="250px" [tableStyle]="{ 'min-width': '30rem'}" [rows]="3">
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Editar/Eliminar</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-cliente>
            <tr>
              <td>{{cliente.id}}</td>
              <td>{{cliente.nombreCliente}}</td>

              <td>
                <div class="flex">
                  <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"
                    (click)="updateCliente(cliente)"></button>
                  <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"
                    (click)="deleteCliente(cliente)"></button>
                </div>
              </td>
            </tr>
          </ng-template>

        </p-table>
      </p-card>
    </div>


    <p-dialog [(visible)]="clienteDialog" header="Nuevo cliente" [modal]="true" [style]="{ width: '25rem' }"
      class="p-fluid">
      <ng-template pTemplate="content">

        <form [formGroup]="clientForm" class="p-formgrid">
          <div class="p-field">
            <label for="nameClient">Nombre del cliente</label>
            <input type="text" formControlName="nombreCliente" pInputText id="nameClient" required />
          </div>
          <div class="p-field">
            <label for="rfc">RFC</label>
            <input type="text" formControlName="rfc" pInputText id="rfc" required minlength="12" maxlength="13" />
          </div>
        </form>
      </ng-template>
      <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text"
          (click)="hideDialog()"></button>
        <button pButton pRipple label="Registrar" icon="pi pi-check" class="p-button-text"
          (click)="registrarCliente()"></button>
      </ng-template>
    </p-dialog>

    <p-dialog [(visible)]="deleteClienteDialog" header="Confirmación" [modal]="true" [style]="{width:'450px'}">
      <div class="flex align-items-center justify-content-center">
        <div class="iconDelete">
          <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
        </div>
        <span *ngIf="clienteDel">Está seguro que quiere eliminar a <b>{{clienteDel.nombreCliente}}</b>?</span>

      </div>
      <ng-template pTemplate="footer">
        <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No"
          (click)="deleteClienteDialog = false"></button>
        <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Si"
          (click)="confirmDeleteCliente()"></button>
      </ng-template>
    </p-dialog>

    <p-dialog [(visible)]="updateDialog" header="Actualizar cliente" [modal]="true" [style]="{ width: '25rem' }"
      class="p-fluid">
      <ng-template pTemplate="content">

        <form [formGroup]="clientForm" class="p-formgrid">
          <div class="p-field">
            <label for="nameClient">Nombre del cliente</label>
            <input type="text" [(ngModel)]="clienteUp.nombreCliente" formControlName="nombreCliente" pInputText id="nameClient" required />
          </div>
          <div class="p-field">
            <label for="rfc">RFC</label>
            <input type="text" [(ngModel)]="clienteUp.rfc" formControlName="rfc" pInputText id="rfc" required minlength="12" maxlength="13"/>
          </div>
        </form>
      </ng-template>
      <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text"
          (click)="updateDialog = false"></button>
        <button pButton pRipple label="Actualizar" icon="pi pi-check" class="p-button-text"
        (click)="updateClientConfirm()" ></button>
      </ng-template>
    </p-dialog>


  </div>
  <p-toast position="top-center"></p-toast>

</div>